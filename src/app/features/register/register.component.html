<b-card [formGroup]="registerForm" [style.maxWidth.vw]="75">
  <b-card-content>
    <label for="name">Name *</label>
    <input type="text" b-input id="name" formControlName="name" placeholder="Your name" />
    @if (registerForm.get('name')?.invalid && registerForm.get('name')?.touched) {
      <div class="error">Name is required.</div>
    }
    <label for="email">Email *</label>
    <input type="email" b-input id="email" formControlName="email" placeholder="you@email.com" />
    <div class="info">The email domain must match your company domain (e.g. user&#64;rocket-hr.com)</div>
    @if (registerForm.get('email')?.errors?.['email'] && registerForm.get('email')?.touched) {
      <div class="error">Valid email is required.</div>
    }
    @if (registerForm.get('email')?.errors?.['freeDomain'] && registerForm.get('email')?.touched) {
      <div class="error" style="margin-top: 8px">Corporate email required (no free providers).</div>
    }
    @if (errorMsg()) {
      <div class="error" style="margin-top: 8px">{{ errorMsg() }}</div>
    }
    @if (sent() && !verified()) {
      <div class="success" style="margin-top: 8px">Verification code sent. Enter it below.</div>
      <label for="code" style="margin-top: 12px">Code *</label>
      <input type="text" b-input id="code" formControlName="code" placeholder="123456" />
      @if (registerForm.get('code')?.invalid && registerForm.get('code')?.touched) {
        <div class="error" style="margin-top: 4px">Code required.</div>
      }
    }
    @if (verified()) {
      <div class="success" style="margin-top: 8px">Code verified. Redirecting...</div>
    }
  </b-card-content>
  <b-card-footer [style.flexDirection]="'column'">
    <button
      b-button
      variant="primary"
      type="submit"
      (click)="onSubmit()"
      [disabled]="registerForm.invalid || sending() || sent()">
      @if (sending()) {
        Sending...
      } @else if (sent()) {
        Sent âœ”
      } @else {
        Send code
      }
    </button>
    @if (sent() && !verified()) {
      <button b-button variant="secondary" type="button" (click)="verifyCode()" [disabled]="verifying()">
        @if (verifying()) {
          Verifying...
        } @else {
          Verify code
        }
      </button>
    }
  </b-card-footer>
</b-card>
